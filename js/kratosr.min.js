let kr={};(()=>{const t=()=>{$(document).on("click",".xHeading",(function(t){$(this).next().slideToggle(300),$(this).parent(".xControl").hasClass("active")?$(this).parent(".xControl").removeClass("active"):$(this).parent(".xControl").addClass("active"),t.preventDefault()}))},e=()=>{void 0!==$.fancybox&&($.fancybox.defaults.hash=!1,$(".kratos-hentry").each((function(t){$(this).find("img").each((function(){if($(this).parent().hasClass("fancybox")||$(this).parent().hasClass("qrcode")||$(this).parent().is("a"))return;const t=this.alt;t&&$(this).after('<span class="caption">'+t+"</span>"),$(this).wrap('<a rel="gallery" href="'+this.src+'" data-fancybox="gallery" data-caption="'+t+'"></a>')})),$(this).find(".fancybox").each((function(){$(this).attr("rel","article"+t)}))})),$(".fancybox").fancybox())},n=()=>{$(document).on("click","a[class=toc-link]",(function(){return $("html, body").animate({scrollTop:$(decodeURI($(this).attr("href"))).offset().top-60},500),!1}))};let o;let a="";$.fn.pjax_reload=()=>{(()=>{const t=document.getElementsByClassName("kratos-entry-thumb-new-img"),e=kr.picCDN?"//cdn.jsdelivr.net/gh/Candinya/Kratos-Rebirth@latest/source/":"/";for(let n=0,o=t.length;n<o;n++)$(t[n]).attr("src")||$(t[n]).attr("src",e+`images/thumb/thumb_${Math.floor(20*Math.random()+1)}.webp`)})(),e(),o=`\n\n-------------------------\n${kr.copyrightNotice}\n作者：${document.querySelector("meta[name='author']").getAttribute("content")}\n来源：${document.title}\n链接：${window.location.href}\n`,a=document.title};const s=()=>{$(this).pjax_reload(),kr.copyrightNotice&&(document.body.oncopy=t=>{t.preventDefault(),t.clipboardData&&t.clipboardData.setData("text/plain",window.getSelection().toString()+o)}),(()=>{if(kr.siteLeaveEvent){let t;const e=$('[rel="icon"]').attr("href");document.addEventListener("visibilitychange",()=>{document.hidden?(document.title=kr.leaveTitle,kr.leaveLogo&&$('[rel="icon"]').attr("href",kr.leaveLogo),clearTimeout(t)):(document.title=kr.returnTitle+" "+a,kr.leaveLogo&&$('[rel="icon"]').attr("href",e),t=setTimeout(()=>{document.title=a,t=0},2e3))})}})(),(()=>{let t=new Date;const e=new Date(kr.createTime),n=document.getElementById("span_dt");setInterval(()=>{t.setTime(t.getTime()+1e3),days=(t-e)/1e3/60/60/24,dnum=Math.floor(days),hours=(t-e)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1===String(hnum).length&&(hnum="0"+hnum),minutes=(t-e)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1===String(mnum).length&&(mnum="0"+mnum),seconds=(t-e)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1===String(snum).length&&(snum="0"+snum),n.innerText=dnum+"天"+hnum+"小时"+mnum+"分"+snum+"秒"},1e3)})()};$(()=>{var e;e=s,fetch("/config/main.json").then(t=>t.json()).then(t=>{kr=t}).then(()=>{e()}),(()=>{const t=()=>{$(window).scrollTop()>200?$(".kr-tool").addClass("scroll-down"):$(".kr-tool").removeClass("scroll-down")};$(".gotop-box").on("click",(function(t){return $("html, body").animate({scrollTop:$("html").offset().top},500),!1})),t(),$(window).scroll(()=>{t()})})(),(()=>{let t=$("#kratos-menu-wrap").clone();t.attr({id:"offcanvas-menu"}),t.filter("> ul").attr({class:"ul-me",id:""}),$("#kratos-page").prepend(t),$(".js-kratos-nav-toggle").on("click",()=>{$(".nav-toggle").hasClass("toon")?($(".nav-toggle").removeClass("toon"),$("#offcanvas-menu").css("right","-240px")):($(".nav-toggle").addClass("toon"),$("#offcanvas-menu").css("right","0px"))}),$("#offcanvas-menu").css("height",$(window).height()),$("#offcanvas-menu").css("right","-240px"),$(window).resize(()=>{const t=$(window);$("#offcanvas-menu").css("height",t.height()),t.width()>769&&$(".nav-toggle").hasClass("toon")&&($(".nav-toggle").removeClass("toon"),$("#offcanvas-menu").css("right","-240px"))})})(),$(document).click(t=>{const e=$("#offcanvas-menu,.js-kratos-nav-toggle");e.is(t.target)||0!==e.has(t.target).length||$(".nav-toggle").hasClass("toon")&&($(".nav-toggle").removeClass("toon"),$("#offcanvas-menu").css("right","-240px"))}),t(),$(document).on("click",".share",()=>{$(".share-wrap").fadeToggle("slow")}),n()}),window.onload=void console.log("页面加载完毕！消耗了 %c"+Math.round(100*performance.now())/100+" ms","background:#282c34;color:#51aded;")})();